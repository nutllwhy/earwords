# EarWords Widget 与深色模式测试文档

## 1. Widget 小组件测试

### 1.1 小组件添加测试
- [ ] 长按主屏幕，点击左上角 "+" 按钮
- [ ] 搜索 "EarWords" 或 "EarWords Widget"
- [ ] 确认显示 3 种小组件：
  - 今日学习进度
  - 锁屏进度
  - 连续打卡

### 1.2 今日进度小组件测试

#### 小尺寸 (.systemSmall)
- [ ] 显示圆形进度环
- [ ] 显示今日进度百分比
- [ ] 显示新词进度 (已学/目标)
- [ ] 显示复习进度 (已复习/目标)
- [ ] 显示连续打卡天数（火焰图标）
- [ ] 点击跳转到学习页面

#### 中尺寸 (.systemMedium)
- [ ] 左侧显示大圆形进度
- [ ] 右侧显示新词学习进度条
- [ ] 右侧显示单词复习进度条
- [ ] 显示待复习单词数量提示
- [ ] 显示连续打卡天数
- [ ] 点击跳转到学习页面

#### 大尺寸 (.systemLarge)
- [ ] 顶部显示今日学习进度标题和日期
- [ ] 中间显示大圆形进度（带完成标记）
- [ ] 底部显示三个统计卡片：
  - 新词学习进度
  - 单词复习进度
  - 待复习数量
- [ ] 目标完成时显示 "今日目标已完成" 提示
- [ ] 点击跳转到学习页面

### 1.3 锁屏小组件测试 (iOS 16+)

#### 圆形 (.accessoryCircular)
- [ ] 显示进度环
- [ ] 显示百分比数字
- [ ] 显示火焰图标（如果有连续天数）

#### 矩形 (.accessoryRectangular)
- [ ] 显示左侧进度环
- [ ] 显示 "今日学习" 标题
- [ ] 显示新词和复习进度
- [ ] 显示连续天数

#### 行内 (.accessoryInline)
- [ ] 显示简洁的进度信息
- [ ] 格式：书本图标 + 新词进度 + 火焰图标 + 连续天数

### 1.4 连续打卡小组件测试

#### 小尺寸
- [ ] 显示大火焰图标
- [ ] 显示连续天数大数字
- [ ] 显示 "连续天数" 标签
- [ ] 显示 "继续保持" 鼓励文字
- [ ] 使用橙色渐变背景

#### 锁屏圆形
- [ ] 显示火焰图标
- [ ] 显示连续天数数字

### 1.5 数据刷新测试
- [ ] 学习几个单词后，小组件自动更新
- [ ] 每小时自动刷新数据
- [ ] 应用切换到前台时刷新数据
- [ ] 锁屏小组件数据与主应用一致

## 2. 深色模式测试

### 2.1 全局颜色适配
- [ ] 主色调在深色模式下更明亮
- [ ] 卡片背景在深色模式下使用 systemGray6
- [ ] 文字颜色自动适配
- [ ] 阴影在深色模式下隐藏或减弱

### 2.2 学习界面 (StudyView)
- [ ] 进度条渐变在深色模式下降低透明度
- [ ] 评分按钮背景色在深色模式下加深
- [ ] 学习完成页面背景适配深色
- [ ] 统计卡片颜色适配深色

### 2.3 单词卡片 (WordCardView)
- [ ] 卡片背景使用 tertiarySystemBackground
- [ ] 单词文字颜色为白色（深色模式）
- [ ] 释义文字颜色适配
- [ ] 操作按钮背景色加深

### 2.4 磨耳朵播放器 (AudioReviewView)
- [ ] 渐变背景在深色模式下降低透明度
- [ ] 播放器卡片背景适配深色
- [ ] 波形动画颜色正确
- [ ] 播放列表项背景色适配
- [ ] 速度控制按钮颜色适配

### 2.5 统计图表 (StatisticsView)
- [ ] 图表柱颜色在深色模式下降低透明度
- [ ] 卡片背景适配深色
- [ ] 连续打卡卡片渐变适配深色
- [ ] 章节进度条颜色适配

### 2.6 设置页面 (SettingsView)
- [ ] 列表背景适配深色
- [ ] 主题选择器预览正确显示深色模式
- [ ] 所有开关控件颜色适配

## 3. 动态主题测试

### 3.1 主题切换
- [ ] 进入设置 > 外观 > 主题颜色
- [ ] 测试 4 种主题色：
  - [ ] 紫罗兰
  - [ ] 天空蓝
  - [ ] 森林绿
  - [ ] 活力橙
- [ ] 切换主题后，全局颜色立即更新
- [ ] 渐变色正确显示
- [ ] 按钮颜色正确更新
- [ ] 进度条颜色正确更新
- [ ] 图表颜色正确更新

### 3.2 主题持久化
- [ ] 切换主题后退出应用
- [ ] 重新打开应用，主题保持上次选择
- [ ] 小组件颜色与主应用一致

### 3.3 外观模式
- [ ] 跟随系统：切换系统外观，应用自动适配
- [ ] 强制浅色：系统为深色，应用保持浅色
- [ ] 强制深色：系统为浅色，应用保持深色

## 4. 不同尺寸适配测试

### 4.1 iPhone 尺寸
- [ ] iPhone SE (小屏)
- [ ] iPhone 14 (标准屏)
- [ ] iPhone 14 Pro Max (大屏)

### 4.2 iPad 尺寸
- [ ] iPad mini
- [ ] iPad Air
- [ ] iPad Pro

### 4.3 小组件尺寸
- [ ] 小尺寸 (2x2 图标)
- [ ] 中尺寸 (4x2 图标)
- [ ] 大尺寸 (4x4 图标)

## 5. 性能测试

### 5.1 小组件性能
- [ ] 小组件加载时间 < 1秒
- [ ] 小组件刷新不卡顿
- [ ] 同时添加多个小组件正常

### 5.2 深色模式性能
- [ ] 切换深色模式无闪烁
- [ ] 滚动流畅无掉帧

## 6. 边界情况测试

### 6.1 数据边界
- [ ] 连续打卡 0 天
- [ ] 连续打卡 365+ 天
- [ ] 今日目标已完成 (100%)
- [ ] 今日目标 0%

### 6.2 异常处理
- [ ] 无网络时小组件显示
- [ ] App Group 未配置时提示
- [ ] 无学习数据时显示占位

## 测试通过标准

- 所有功能测试项通过率 > 95%
- 所有界面在不同尺寸设备上正常显示
- 深色模式切换无视觉问题
- 小组件数据与实际应用一致
- 主题切换后颜色统一

## 已知问题

暂无

## 修复记录

| 日期 | 问题 | 修复方案 |
|------|------|----------|
| 2026-02-24 | 初始版本 | 实现 Widget 与深色模式 |
