# EarWords 听词 - 产品需求文档 (PRD)

> 版本: 1.0  
> 日期: 2026-02-24  
> 作者: 栗噔噔  

---

## 1. 产品概述

### 1.1 产品定位
EarWords (听词) 是一款专为雅思备考设计的英语词汇学习 App，基于刘洪波《雅思词汇真经》，采用 SM-2 间隔重复算法，帮助用户高效记忆 3674 个雅思高频词汇。

### 1.2 核心目标
- **短期目标**：帮助用户在 3-6 个月内掌握雅思核心词汇
- **长期目标**：建立可持续的英语学习习惯，提升词汇量和 retention rate

### 1.3 目标用户
- **主要用户**：备考雅思的学生（大学生、职场人士）
- **次要用户**：希望提升英语词汇量的英语学习者
- **使用场景**：通勤、睡前、碎片时间学习

---

## 2. 用户故事

### 2.1 学习场景

**用户A - 大学生小宇**
> "我每天早上坐公交去上课，有30分钟时间。我想利用这段时间背单词，但拿着手机看容易晕车。希望有一款可以'听'的单词App，让我闭着眼睛也能学。"

**用户B - 职场人士小李**
> "工作太忙，很难抽出专门时间学习。我希望App能根据我的记忆情况自动安排复习，不要让我自己决定今天学什么。"

**用户C - 雅思考生小王**
> "我考过两次雅思，词汇量总是上不去。之前用的背单词App，背完就忘。希望有科学的记忆方法，真正记住单词。"

### 2.2 核心需求
1. **被动学习**：通勤/运动时也能学习（听单词）
2. **科学记忆**：根据遗忘曲线自动安排复习
3. **进度可见**：清晰的学习统计和成就感
4. **离线可用**：地铁上也能使用

---

## 3. 功能规格

### 3.1 功能架构图

```
EarWords
├── 📚 每日学习 (核心)
│   ├── 单词卡片
│   ├── SM-2评分
│   └── 学习统计
├── 🎧 磨耳朵 (特色)
│   ├── 音频播放
│   ├── 播放列表
│   └── 播放模式
├── 📊 统计 (激励)
│   ├── 今日概览
│   ├── 学习趋势
│   └── 连续打卡
├── 📖 词库 (查询)
│   ├── 章节浏览
│   ├── 搜索
│   └── 筛选
└── ⚙️ 设置
    ├── 每日目标
    ├── 音频设置
    └── 数据同步
```

### 3.2 核心功能详解

#### 3.2.1 每日学习

**功能描述**：基于 SM-2 算法的学习界面

**交互逻辑**：
```
用户打开App → 显示今日待学单词
    ↓
显示单词卡片（仅显示单词+音标）
    ↓
用户点击"显示释义" → 显示中文释义
    ↓
用户点击"显示例句" → 显示英文例句
    ↓
用户自评（0-5分）→ 记录并计算下次复习时间
    ↓
显示下一个单词
```

**评分标准（SM-2）**：
| 分数 | 含义 | 下次复习 |
|------|------|----------|
| 0 | 完全忘记 | 当天重复 |
| 1 | 错误，看到答案想起 | 当天重复 |
| 2 | 困难，勉强想起 | 1天后 |
| 3 | 犹豫后正确 | 3天后 |
| 4 | 正确 | 7天后 |
| 5 | 完美 | 14天后 |

**页面流程**：
```
[学习主页面]
    │
    ├─ 顶部：进度条 (当前/总数)
    │
    ├─ 中部：单词卡片
    │   ├─ 章节标签
    │   ├─ 单词（大号）
    │   ├─ 音标
    │   ├─ 词性
    │   ├─ [点击展开] 释义
    │   └─ [点击展开] 例句 + 播放按钮
    │
    ├─ 底部：控制按钮
    │   ├─ "显示释义" 按钮
    │   └─ "显示例句" 按钮
    │
    └─ 评分区（0-5分按钮）
```

#### 3.2.2 磨耳朵

**功能描述**：将单词和例句合成音频，支持后台播放

**交互逻辑**：
```
用户进入磨耳朵 → 加载最近学习单词
    ↓
显示播放器界面
    ↓
点击播放 → 朗读：单词 + 例句
    ↓
播放完成 → 自动播放下一个
    ↓
用户可点击"显示单词"查看当前播放内容
```

**播放模式**：
1. **顺序播放**：按章节顺序播放
2. **随机播放**：随机打乱单词
3. **间隔重复**：根据掌握程度调整播放频率

**页面流程**：
```
[磨耳朵页面]
    │
    ├─ 顶部：模式选择（顺序/随机/间隔）
    │
    ├─ 中部：播放器
    │   ├─ 音频波形动画
    │   ├─ 当前单词
    │   ├─ 例句预览
    │   ├─ 进度条
    │   └─ [可选] 显示单词按钮
    │
    ├─ 控制区
    │   ├─ 上一首
    │   ├─ 播放/暂停
    │   └─ 下一首
    │
    └─ 播放列表（横向滚动）
```

#### 3.2.3 学习统计

**功能描述**：可视化展示学习数据，提供成就感

**数据指标**：
- 今日新学单词数
- 今日复习单词数
- 正确率
- 连续学习天数
- 已掌握单词数
- 学习趋势图

**页面流程**：
```
[统计页面]
    │
    ├─ 今日概览卡片
    │   ├─ 新学：20词
    │   ├─ 复习：35词
    │   └─ 正确率：85%
    │
    ├─ 连续学习天数（火焰图标）
    │   ├─ 当前 streak：7天
    │   └─ 最长记录：30天
    │
    ├─ 学习趋势图（7天/30天/全年）
    │   └─ 柱状图：新词 + 复习
    │
    ├─ 词汇掌握情况
    │   ├─ 未学习：1000词
    │   ├─ 学习中：1500词
    │   └─ 已掌握：1174词
    │
    └─ 章节进度列表
```

#### 3.2.4 词库

**功能描述**：浏览和搜索单词

**交互逻辑**：
```
用户进入词库 → 显示章节列表
    ↓
选择章节 → 显示该章节单词
    ↓
点击单词 → 进入详情页
    ↓
可播放音频、查看例句
```

**搜索功能**：
- 支持英文单词搜索
- 支持中文释义搜索
- 实时搜索结果

---

## 4. 数据模型

### 4.1 单词实体 (WordEntity)

```swift
struct Word {
    id: Int              // 唯一标识
    word: String         // 单词
    phonetic: String?    // 音标
    pos: String?         // 词性
    meaning: String      // 中文释义
    example: String?     // 英文例句
    extra: String?       // 补充信息
    chapter: String      // 所属章节
    chapterKey: String   // 章节key
    difficulty: Int      // 难度等级 1-5
    
    // 学习状态
    status: String       // new/learning/mastered
    reviewCount: Int     // 复习次数
    nextReviewDate: Date? // 下次复习日期
    easeFactor: Double   // SM-2 简易度因子
    interval: Int        // 间隔天数
    
    // 音频
    audioUrl: String?    // 音标音频URL
    exampleAudioPath: String? // 例句音频本地路径
}
```

### 4.2 复习记录 (ReviewLog)

```swift
struct ReviewLog {
    id: UUID
    wordId: Int          // 单词ID
    reviewDate: Date     // 复习时间
    quality: Int         // 评分 0-5
    result: String       // correct/incorrect
    
    // SM-2 记录
    previousEaseFactor: Double
    newEaseFactor: Double
    previousInterval: Int
    newInterval: Int
    
    timeSpent: Double    // 耗时（秒）
    studyMode: String    // normal/audio/quick
}
```

### 4.3 用户设置 (UserSettings)

```swift
struct UserSettings {
    dailyNewWordsGoal: Int      // 每日新词目标（默认20）
    dailyReviewGoal: Int        // 每日复习目标（默认50）
    
    audioAutoPlay: Bool         // 自动播放音频
    showPhonetic: Bool          // 显示音标
    showExample: Bool           // 显示例句
    speechRate: Double          // 语速 0.5-1.0
    
    reminderEnabled: Bool       // 提醒开关
    reminderTime: Date?         // 提醒时间
    
    iCloudEnabled: Bool         // iCloud同步
}
```

---

## 5. 技术规格

### 5.1 技术栈
- **平台**: iOS 16+
- **语言**: Swift 5.9
- **框架**: SwiftUI
- **数据**: Core Data + CloudKit
- **音频**: AVSpeechSynthesizer / AVAudioPlayer

### 5.2 数据存储
- **本地**: Core Data (SQLite)
- **同步**: CloudKit (iCloud)
- **离线**: 完整支持

### 5.3 性能要求
- 启动时间 < 2秒
- 单词卡片切换 < 0.3秒
- 音频播放延迟 < 0.5秒
- 支持 3,674 个单词流畅检索

---

## 6. 界面设计规范

### 6.1 设计原则
- **简洁**：单屏显示，减少滚动
- **专注**：学习时无干扰元素
- **反馈**：操作有明确反馈
- **一致性**：全 App 视觉统一

### 6.2 色彩系统
- **主色**: #7C3AED (紫色)
- **成功**: #10B981 (绿色)
- **警告**: #F59E0B (橙色)
- **背景**: #F8FAFC (浅灰)
- **卡片**: #FFFFFF (白色)
- **文字**: #1E293B (深色)

### 6.3 字体规范
- **单词**: 34pt Bold
- **音标**: 18pt Regular (serif)
- **释义**: 20pt Medium
- **例句**: 16pt Regular
- **标签**: 12pt Medium

### 6.4 组件规范

**单词卡片**
- 圆角: 24pt
- 阴影: 20pt blur, 10pt y-offset
- 内边距: 24pt
- 背景: 白色

**按钮**
- 主按钮: 紫色填充
- 次按钮: 紫色边框
- 圆角: 12pt
- 高度: 44pt

---

## 7. 用户流程

### 7.1 新用户流程
```
首次打开App
    ↓
引导页（3页）
    - 第1页：欢迎 + 产品简介
    - 第2页：SM-2算法介绍
    - 第3页：设置每日目标
    ↓
进入学习页面
    ↓
开始学习第一个单词
```

### 7.2 每日学习流程
```
用户打开App
    ↓
显示今日待学单词列表
    ↓
用户学习单词（卡片滑动）
    ↓
完成今日目标
    ↓
显示完成页面
    - 今日学习统计
    - 连续学习天数
    - 明日预告
```

### 7.3 磨耳朵流程
```
用户进入磨耳朵
    ↓
选择播放模式
    ↓
开始播放
    ↓
用户可：
    - 切换单词
    - 查看当前单词详情
    - 调整播放速度
    - 后台播放
```

---

## 8. 异常处理

### 8.1 网络异常
- **无网络**: 使用本地缓存，功能正常
- **弱网络**: 提示但不阻断操作
- **同步失败**: 自动重试，用户无感知

### 8.2 数据异常
- **数据丢失**: 从 iCloud 恢复
- **数据冲突**: 以最新修改为准
- **损坏修复**: 自动重置学习状态

### 8.3 音频异常
- **TTS失败**: 降级使用系统TTS
- **音频缺失**: 显示提示，使用文字替代
- **后台播放中断**: 自动恢复

---

## 9. 后续迭代计划

### 9.1 V1.1 (2周内)
- [ ] Widget 小组件
- [ ] Siri 快捷指令
- [ ] 深色模式优化

### 9.2 V1.2 (1个月内)
- [ ] 导入自定义词库
- [ ] 学习提醒通知
- [ ] 学习报告导出

### 9.3 V2.0 (3个月内)
- [ ] 学习社区
- [ ] 排行榜
- [ ] 成就系统

---

## 10. 附录

### 10.1 参考资源
- **词库来源**: 刘洪波《雅思词汇真经》
- **算法参考**: SuperMemo SM-2
- **设计参考**: Anki, 墨墨背单词

### 10.2 术语表
- **SM-2**: SuperMemo-2 间隔重复算法
- **Retention**: 记忆保持率
- **Streak**: 连续学习天数
- **SRS**: Spaced Repetition System 间隔重复系统

---

**文档版本历史**
| 版本 | 日期 | 修改内容 |
|------|------|----------|
| 1.0 | 2026-02-24 | 初始版本 |
